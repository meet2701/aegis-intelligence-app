{% extends "base.html" %}

{% block title %}Revoke Bounty - AEGIS{% endblock %}

{% block content %}
<div class="card-custom">
    <div class="card-header-custom">
        ‚ùå REVOKE BOUNTY RECORD
    </div>
    
    <p style="color: var(--text-secondary); margin-bottom: 2rem;">
        Permanently delete a specific bounty record from the database. This is an irreversible operation.
    </p>
    
    {% if bounty_records %}
        <h5 style="color: var(--text-primary); margin-bottom: 1rem;">
            Current Bounty Records: {{ bounty_records|length }}
        </h5>
        
        <div style="overflow-x: auto; margin-bottom: 2rem;">
            <table class="table-custom">
                <thead>
                    <tr>
                        <th>Person ID</th>
                        <th>Name</th>
                        <th>Record Version</th>
                        <th>Issue Date</th>
                        <th>Last Seen Island</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for record in bounty_records %}
                    <tr>
                        <td>{{ record.Person_ID }}</td>
                        <td style="font-weight: bold;">{{ record.First_Name }} {{ record.Last_Name }}</td>
                        <td>{{ record.Record_Version }}</td>
                        <td>{{ record.Issue_Date }}</td>
                        <td>{{ record.Last_Seen_Island_ID if record.Last_Seen_Island_ID else 'Unknown' }}</td>
                        <td>
                            <form method="POST" action="{{ url_for('revoke_bounty') }}" style="display: inline;">
                                <input type="hidden" name="person_id" value="{{ record.Person_ID }}">
                                <input type="hidden" name="record_version" value="{{ record.Record_Version }}">
                                <button 
                                    type="submit" 
                                    class="btn btn-danger-custom btn-sm"
                                    onclick="return confirm('‚ö†Ô∏è CONFIRM DELETION: Are you sure you want to revoke this bounty record?');"
                                >
                                    üóëÔ∏è DELETE
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert-custom alert-warning-custom">
            INTELLIGENCE NOT FOUND. No bounty records available in the database.
        </div>
    {% endif %}
    
    <div style="background: rgba(255, 51, 51, 0.1); border: 2px solid var(--danger-color); border-radius: 5px; padding: 1rem; margin: 1.5rem 0;">
        <p style="color: var(--danger-color); margin: 0; font-weight: bold;">
            ‚ö†Ô∏è DANGER: Deletion is permanent. The bounty record cannot be recovered after deletion.
        </p>
    </div>
    
    <a href="{{ url_for('dashboard') }}" class="btn btn-custom" style="background: #666;">
        ‚Üê BACK TO DASHBOARD
    </a>
</div>
{% endblock %}
